        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>SourceFileSegment class / source_maps.span Library / Hop Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="source_maps.span" data-type="SourceFileSegment">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Hop Documentation</a>
         &rsaquo; <a href="../source_maps.span.html">source_maps.span</a> &rsaquo; <a href="../source_maps.span/SourceFileSegment.html">SourceFileSegment</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>SourceFileSegment</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<p>A convenience type to treat a code segment as if it were a separate
<a class="crossref" href="../source_maps.span/SourceFile.html">SourceFile</a>. A <a class="crossref" href="../source_maps.span/SourceFileSegment.html">SourceFileSegment</a> shifts all locations by an offset, which
allows you to set source-map locations based on the locations relative to
the start of the segment, but that get translated to absolute locations in
the original source file.</p>
<pre class="source">
class SourceFileSegment extends SourceFile {
 final int _baseOffset;
 final int _baseLine;
 final int _baseColumn;
 final int _maxOffset;

 SourceFileSegment(String url, String textSegment, Location startOffset)
     : _baseOffset = startOffset.offset,
       _baseLine = startOffset.line,
       _baseColumn = startOffset.column,
       _maxOffset = startOffset.offset + textSegment.length,
       super.text(url, textSegment);

 /// Craete a span, where [start] is relative to this segment's base offset.
 /// The returned span stores the real offset on the file, so that error
 /// messages are reported at the real location.
 Span span(int start, [int end, bool isIdentifier = false]) =&gt;
     super.span(start + _baseOffset,
         end == null ? null : end + _baseOffset, isIdentifier);

 /// Create a location, where [offset] relative to this segment's base offset.
 /// The returned span stores the real offset on the file, so that error
 /// messages are reported at the real location.
 Location location(int offset) =&gt; super.location(offset + _baseOffset);

 /// Return the line on the underlying file associated with the [offset] of the
 /// underlying file. This method operates on the real offsets from the
 /// original file, so that error messages can be reported accurately. When the
 /// requested offset is past the length of the segment, this returns the line
 /// number after the end of the segment (total lines + 1).
 int getLine(int offset) {
   var res = super.getLine(max(offset - _baseOffset, 0)) + _baseLine;
   return (offset &gt; _maxOffset) ? res + 1 : res;
 }

 /// Return the column on the underlying file associated with [line] and
 /// [offset], where [line] is absolute from the beginning of the underlying
 /// file. This method operates on the real offsets from the original file, so
 /// that error messages can be reported accurately.
 int getColumn(int line, int offset) {
   var col = super.getColumn(line - _baseLine, max(offset - _baseOffset, 0));
   return line == _baseLine ? col + _baseColumn : col;
 }

 /// Return the offset associated with a line and column. This method operates
 /// on the real offsets from the original file, so that error messages can be
 /// reported accurately.
 int getOffset(int line, int column) =&gt;
   super.getOffset(line - _baseLine,
       line == _baseLine ? column - _baseColumn : column) + _baseOffset;

 /// Retrieve the text associated with the specified range. This method
 /// operates on the real offsets from the original file, so that error
 /// messages can be reported accurately.
 String getText(int start, [int end]) =&gt;
   super.getText(start - _baseOffset, end == null ? null : end - _baseOffset);
}
</pre>
</div>
<h3>Extends</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../source_maps.span/SourceFile.html">SourceFile</a></span>&nbsp;&gt;&nbsp;<span class="type-box"><span class="icon-class"></span><strong>SourceFileSegment</strong></span></p>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="">
<button class="show-code">Code</button>
new <strong>SourceFileSegment</strong>(<a href="http://api.dartlang.org/dart_core/String.html">String</a> url, <a href="http://api.dartlang.org/dart_core/String.html">String</a> textSegment, <a href="../source_maps.span/Location.html">Location</a> startOffset) <a class="anchor-link" href="#"
              title="Permalink to SourceFileSegment.SourceFileSegment">#</a></h4>
<div class="doc">
<div class="inherited">
<p>Creates a new <a class="crossref" href="../dart_core/Object.html">Object</a> instance.</p>
<p><a class="crossref" href="../dart_core/Object.html">Object</a> instances have no meaningful state, and are only useful
through their identity. An <a class="crossref" href="../dart_core/Object.html">Object</a> instance is equal to itself
only.</p>
<div class="docs-inherited-from">docs inherited from <a href="http://api.dartlang.org/dart_core/Object.html">Object</a> </div></div>
<pre class="source">
SourceFileSegment(String url, String textSegment, Location startOffset)
   : _baseOffset = startOffset.offset,
     _baseLine = startOffset.line,
     _baseColumn = startOffset.column,
     _maxOffset = startOffset.offset + textSegment.length,
     super.text(url, textSegment);
</pre>
</div>
</div>
</div>
<div class="inherited">
<h3>Properties</h3>
<div class="field inherited"><h4 id="url">
<button class="show-code">Code</button>
final <a href="http://api.dartlang.org/dart_core/String.html">String</a>         <strong>url</strong> <a class="anchor-link"
            href="#url"
            title="Permalink to SourceFileSegment.url">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../source_maps.span/SourceFile.html">SourceFile</a> </div><div class="doc">
<p>Url where the source file is located.</p>
<pre class="source">
final String url
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="getColumn">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/int.html">int</a> <strong>getColumn</strong>(<a href="http://api.dartlang.org/dart_core/int.html">int</a> line, <a href="http://api.dartlang.org/dart_core/int.html">int</a> offset) <a class="anchor-link" href="#getColumn"
              title="Permalink to SourceFileSegment.getColumn">#</a></h4>
<div class="doc">
<p>Return the column on the underlying file associated with 
<span class="param">line</span> and

<span class="param">offset</span>, where 
<span class="param">line</span> is absolute from the beginning of the underlying
file. This method operates on the real offsets from the original file, so
that error messages can be reported accurately.</p>
<pre class="source">
int getColumn(int line, int offset) {
 var col = super.getColumn(line - _baseLine, max(offset - _baseOffset, 0));
 return line == _baseLine ? col + _baseColumn : col;
}
</pre>
</div>
</div>
<div class="method"><h4 id="getLine">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/int.html">int</a> <strong>getLine</strong>(<a href="http://api.dartlang.org/dart_core/int.html">int</a> offset) <a class="anchor-link" href="#getLine"
              title="Permalink to SourceFileSegment.getLine">#</a></h4>
<div class="doc">
<p>Return the line on the underlying file associated with the 
<span class="param">offset</span> of the
underlying file. This method operates on the real offsets from the
original file, so that error messages can be reported accurately. When the
requested offset is past the length of the segment, this returns the line
number after the end of the segment (total lines + 1).</p>
<pre class="source">
int getLine(int offset) {
 var res = super.getLine(max(offset - _baseOffset, 0)) + _baseLine;
 return (offset &gt; _maxOffset) ? res + 1 : res;
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="getLocationMessage">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/String.html">String</a> <strong>getLocationMessage</strong>(<a href="http://api.dartlang.org/dart_core/String.html">String</a> message, <a href="http://api.dartlang.org/dart_core/int.html">int</a> start, <a href="http://api.dartlang.org/dart_core/int.html">int</a> end, {<a href="http://api.dartlang.org/dart_core/bool.html">bool</a> useColors: false, <a href="http://api.dartlang.org/dart_core/String.html">String</a> color}) <a class="anchor-link" href="#getLocationMessage"
              title="Permalink to SourceFileSegment.getLocationMessage">#</a></h4>
<div class="inherited-from">inherited from <a href="../source_maps.span/SourceFile.html">SourceFile</a> </div><div class="doc">
<p>Create a pretty string representation from a span.</p>
<pre class="source">
String getLocationMessage(String message, int start, int end,
   {bool useColors: false, String color}) {
 // TODO(jmesserly): it would be more useful to pass in an object that
 // controls how the errors are printed. This method is a bit too smart.
 var line = getLine(start);
 var column = getColumn(line, start);

 var src = url == null ? '' : url;
 var msg = '$src:${line + 1}:${column + 1}: $message';

 if (_decodedChars == null) {
   // We don't have any text to include, so exit.
   return msg;
 }

 var buf = new StringBuffer(msg);
 buf.write('\n');

 // +1 for 0-indexing, +1 again to avoid the last line
 var textLine = getText(getOffset(line, 0), getOffset(line + 1, 0));

 column = min(column, textLine.length - 1);
 int toColumn = min(column + end - start, textLine.length);
 if (useColors) {
   if (color == null) {
     color = _RED_COLOR;
   }
   buf.write(textLine.substring(0, column));
   buf.write(color);
   buf.write(textLine.substring(column, toColumn));
   buf.write(_NO_COLOR);
   buf.write(textLine.substring(toColumn));
 } else {
   buf.write(textLine);
   if (textLine != '' &amp;&amp; !textLine.endsWith('\n')) buf.write('\n');
 }

 int i = 0;
 for (; i &lt; column; i++) {
   buf.write(' ');
 }

 if (useColors) buf.write(color);
 for (; i &lt; toColumn; i++) {
   buf.write('^');
 }
 if (useColors) buf.write(_NO_COLOR);
 return buf.toString();
}
</pre>
</div>
</div>
<div class="method"><h4 id="getOffset">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/int.html">int</a> <strong>getOffset</strong>(<a href="http://api.dartlang.org/dart_core/int.html">int</a> line, <a href="http://api.dartlang.org/dart_core/int.html">int</a> column) <a class="anchor-link" href="#getOffset"
              title="Permalink to SourceFileSegment.getOffset">#</a></h4>
<div class="doc">
<p>Return the offset associated with a line and column. This method operates
on the real offsets from the original file, so that error messages can be
reported accurately.</p>
<pre class="source">
int getOffset(int line, int column) =&gt;
 super.getOffset(line - _baseLine,
     line == _baseLine ? column - _baseColumn : column) + _baseOffset;
</pre>
</div>
</div>
<div class="method"><h4 id="getText">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/String.html">String</a> <strong>getText</strong>(<a href="http://api.dartlang.org/dart_core/int.html">int</a> start, [<a href="http://api.dartlang.org/dart_core/int.html">int</a> end]) <a class="anchor-link" href="#getText"
              title="Permalink to SourceFileSegment.getText">#</a></h4>
<div class="doc">
<p>Retrieve the text associated with the specified range. This method
operates on the real offsets from the original file, so that error
messages can be reported accurately.</p>
<pre class="source">
String getText(int start, [int end]) =&gt;
 super.getText(start - _baseOffset, end == null ? null : end - _baseOffset);
</pre>
</div>
</div>
<div class="method"><h4 id="location">
<button class="show-code">Code</button>
<a href="../source_maps.span/Location.html">Location</a> <strong>location</strong>(<a href="http://api.dartlang.org/dart_core/int.html">int</a> offset) <a class="anchor-link" href="#location"
              title="Permalink to SourceFileSegment.location">#</a></h4>
<div class="doc">
<p>Create a location, where 
<span class="param">offset</span> relative to this segment's base offset.
The returned span stores the real offset on the file, so that error
messages are reported at the real location.</p>
<pre class="source">
Location location(int offset) =&gt; super.location(offset + _baseOffset);
</pre>
</div>
</div>
<div class="method"><h4 id="span">
<button class="show-code">Code</button>
<a href="../source_maps.span/Span.html">Span</a> <strong>span</strong>(<a href="http://api.dartlang.org/dart_core/int.html">int</a> start, [<a href="http://api.dartlang.org/dart_core/int.html">int</a> end, <a href="http://api.dartlang.org/dart_core/bool.html">bool</a> isIdentifier = false]) <a class="anchor-link" href="#span"
              title="Permalink to SourceFileSegment.span">#</a></h4>
<div class="doc">
<p>Craete a span, where 
<span class="param">start</span> is relative to this segment's base offset.
The returned span stores the real offset on the file, so that error
messages are reported at the real location.</p>
<pre class="source">
Span span(int start, [int end, bool isIdentifier = false]) =&gt;
   super.span(start + _baseOffset,
       end == null ? null : end + _baseOffset, isIdentifier);
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        

        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>char_encodings Library / Hop Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="favicon.ico">
        
        </head>
        <body data-library="char_encodings">
        <div class="page">
        <div class="header">
          <a href="index.html"><div class="logo"></div></a>
          <a href="index.html">Hop Documentation</a>
         &rsaquo; <a href="char_encodings.html">char_encodings</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
<h2><strong>char_encodings</strong> library</h2>
<div class="doc"><p>Decodes bytes using the correct name. See <a class="crossref" href="char_encodings.html#decodeBytes">decodeBytes</a>. </p></div>
<div>
<h3>Functions</h3>
<div class="method"><h4 id="decodeWindows1252AsIterable">
<button class="show-code">Code</button>
<a href="char_encodings/IterableWindows1252Decoder.html">IterableWindows1252Decoder</a> <strong>decodeWindows1252AsIterable</strong>(<a href="http://api.dartlang.org/dart_core/List.html">List</a>&lt;<a href="http://api.dartlang.org/dart_core/int.html">int</a>&gt; bytes, [<a href="http://api.dartlang.org/dart_core/int.html">int</a> offset = 0, <a href="http://api.dartlang.org/dart_core/int.html">int</a> length, <a href="http://api.dartlang.org/dart_core/int.html">int</a> replacementCodepoint = UNICODE_REPLACEMENT_CHARACTER_CODEPOINT]) <a class="anchor-link" href="#decodeWindows1252AsIterable"
              title="Permalink to decodeWindows1252AsIterable">#</a></h4>
<div class="doc">
<p>Decodes <a href="http://en.wikipedia.org/wiki/Windows-1252">windows-1252</a> bytes as an
iterable. Thus, the consumer can only convert as much of the input as needed.
Set the <code>replacementCharacter</code> to null to throw an <a class="crossref" href="dart_core/ArgumentError.html">ArgumentError</a>
rather than replace the bad value.</p>
<pre class="source">
IterableWindows1252Decoder decodeWindows1252AsIterable(List&lt;int&gt; bytes,
   [int offset = 0, int length,
   int replacementCodepoint = UNICODE_REPLACEMENT_CHARACTER_CODEPOINT]) {
 return new IterableWindows1252Decoder(bytes, offset, length,
     replacementCodepoint);
}
</pre>
</div>
</div>
<div class="method"><h4 id="toCodepoints">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>&lt;<a href="http://api.dartlang.org/dart_core/int.html">int</a>&gt; <strong>toCodepoints</strong>(<a href="http://api.dartlang.org/dart_core/String.html">String</a> input) <a class="anchor-link" href="#toCodepoints"
              title="Permalink to toCodepoints">#</a></h4>
<div class="doc">
<p>Returns the code points for the 
<span class="param">input</span>. This works like <code>String.charCodes</code>
but it decodes UTF-16 surrogate pairs.</p>
<pre class="source">
List&lt;int&gt; toCodepoints(String input) {
 var newCodes = &lt;int&gt;[];
 for (int i = 0; i &lt; input.length; i++) {
   var c = input.codeUnitAt(i);
   if (0xD800 &lt;= c &amp;&amp; c &lt;= 0xDBFF) {
     int next = i + 1;
     if (next &lt; input.length) {
       var d = input.codeUnitAt(next);
       if (0xDC00 &lt;= d &amp;&amp; d &lt;= 0xDFFF) {
         c = 0x10000 + ((c - 0xD800) &lt;&lt; 10) + (d - 0xDC00);
         i = next;
       }
     }
   }
   newCodes.add(c);
 }
 return newCodes;
}
</pre>
</div>
</div>
<div class="method"><h4 id="decodeBytes">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/Iterable.html">Iterable</a>&lt;<a href="http://api.dartlang.org/dart_core/int.html">int</a>&gt; <strong>decodeBytes</strong>(<a href="http://api.dartlang.org/dart_core/String.html">String</a> encoding, <a href="http://api.dartlang.org/dart_core/List.html">List</a>&lt;<a href="http://api.dartlang.org/dart_core/int.html">int</a>&gt; bytes, [<a href="http://api.dartlang.org/dart_core/int.html">int</a> offset = 0, <a href="http://api.dartlang.org/dart_core/int.html">int</a> length, <a href="http://api.dartlang.org/dart_core/int.html">int</a> replacementCodepoint = UNICODE_REPLACEMENT_CHARACTER_CODEPOINT]) <a class="anchor-link" href="#decodeBytes"
              title="Permalink to decodeBytes">#</a></h4>
<div class="doc">
<p>Decodes the 
<span class="param">bytes</span> with the provided 
<span class="param">encoding</span> and returns an iterable for
the codepoints. Supports the major unicode encodings as well as ascii and
and windows-1252 encodings.</p>
<pre class="source">
Iterable&lt;int&gt; decodeBytes(String encoding, List&lt;int&gt; bytes,
   [int offset = 0, int length,
   int replacementCodepoint = UNICODE_REPLACEMENT_CHARACTER_CODEPOINT]) {
 if (length == null) length = bytes.length;
 final replace = replacementCodepoint;
 switch (encoding) {
   case 'ascii':
     bytes = bytes.sublist(offset, offset + length);
     // TODO(jmesserly): this was taken from runtime/bin/string_stream.dart
     for (int byte in bytes) {
       if (byte &gt; 127) {
         // TODO(jmesserly): ideally this would be DecoderException, like the
         // one thrown in runtime/bin/string_stream.dart, but we don't want to
         // depend on dart:io.
         throw new FormatException("Illegal ASCII character $byte");
       }
     }
     return bytes;

   case 'windows-1252':
   case 'cp1252':
     return decodeWindows1252AsIterable(bytes, offset, length, replace);

   case 'utf-8':
     // NOTE: to match the behavior of the other decode functions, we eat the
     // utf-8 BOM here.
     if (hasUtf8Bom(bytes, offset, length)) {
       offset += 3;
       length -= 3;
     }
     return decodeUtf8AsIterable(bytes, offset, length, replace);

   case 'utf-16':
     return decodeUtf16AsIterable(bytes, offset, length, replace);
   case 'utf-16-be':
     return decodeUtf16beAsIterable(bytes, offset, length, true, replace);
   case 'utf-16-le':
     return decodeUtf16leAsIterable(bytes, offset, length, true, replace);

   case 'utf-32':
     return decodeUtf32AsIterable(bytes, offset, length, replace);
   case 'utf-32-be':
     return decodeUtf32beAsIterable(bytes, offset, length, true, replace);
   case 'utf-32-le':
     return decodeUtf32leAsIterable(bytes, offset, length, true, replace);

   default:
     throw new ArgumentError('Encoding $encoding not supported');
 }
}
</pre>
</div>
</div>
<div class="method"><h4 id="hasUtf8Bom">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/bool.html">bool</a> <strong>hasUtf8Bom</strong>(<a href="http://api.dartlang.org/dart_core/List.html">List</a>&lt;<a href="http://api.dartlang.org/dart_core/int.html">int</a>&gt; bytes, [<a href="http://api.dartlang.org/dart_core/int.html">int</a> offset = 0, <a href="http://api.dartlang.org/dart_core/int.html">int</a> length]) <a class="anchor-link" href="#hasUtf8Bom"
              title="Permalink to hasUtf8Bom">#</a></h4>
<div class="doc">
<p>Returns true if the 
<span class="param">bytes</span> starts with a UTF-8 byte order mark.
Since UTF-8 doesn't have byte order, it's somewhat of a misnomer, but it is
used in HTML to detect the UTF-</p>
<pre class="source">
bool hasUtf8Bom(List&lt;int&gt; bytes, [int offset = 0, int length]) {
 int end = length != null ? offset + length : bytes.length;
 return (offset + 3) &lt;= end &amp;&amp;
     bytes[offset] == 0xEF &amp;&amp;
     bytes[offset + 1] == 0xBB &amp;&amp;
     bytes[offset + 2] == 0xBF;
}
</pre>
</div>
</div>
</div>
<div>
<h3>Classes</h3>
          <div class="type">
          <h4>
            <a href="char_encodings/IterableWindows1252Decoder.html"><strong>IterableWindows1252Decoder</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="char_encodings/Windows1252Decoder.html"><strong>Windows1252Decoder</strong></a>
          </h4>
          </div>
          
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          
        </div>
        <script async src="client-live-nav.js"></script>
        </body></html>
        
